<div class="jumbotron p-4">
  <h2><b>Reserva de Departamentos</b></h2>
  <p id="notice" class="badge badge-pill badge-danger pt-2 pb-2"><%= notice %></p>
  <div class="table-responsive-sm">
    <table class="table table-striped table-hover w-100">
      <thead class="thead-dark">
        <tr>
          <th colspan="3" class="text-center">
            <%= link_to image_tag('NewIcon.png'), new_apartment_booking_path, title: 'Nuevo' %>
          </th>
          <th class="text-center">Reserva</th>
          <th class="text-center">Cotización</th>
          <th>Proyecto</th>
          <th class="text-center">Depart.</th>
          <th>Cliente</th>
          <th>Banco</th>
          <th>Fecha</th>
          <th>Monto</th>
          <th class="text-center">Activo</th>
        </tr>
      </thead>

      <tbody>
        <% @apartment_bookings.each do |apartment_booking| %>
          <tr>
            <td style="width:33px" class="pr-2 pl-2"><%= link_to image_tag('ShowIcon.png'), apartment_booking, title: 'Ver' %></td>
            <td style="width:33px" class="pr-1 pl-1"><%= link_to image_tag('EditIcon.png'), edit_apartment_booking_path(apartment_booking), title: 'Editar' %></td>

            <td style="width:40px" class="pr-1 pl-2">
              <%= link_to image_tag('DeleteIcon.png'), apartment_booking, title: 'Eliminar', method: :delete, data: { confirm: '¿Esta seguro?' } %></td>         
            <td class="text-center"><%= apartment_booking.id %></td>
            <td class="text-center"><%= Quotation.select(:id).where("id = " + apartment_booking.quotation_id.to_s).collect(&:id)[0] %></td>

            <td>
              <%= Quotation.joins(request_quotation: :project).select("quotations.id as q_id, projects.Name as p_Name").where("q_id = " + apartment_booking.quotation_id.to_s).collect {|e| e.p_Name}[0] %>
              </td>
            <td class="text-center">
              <%= Quotation.joins(request_quotation: :project_apartment).select("quotations.id as q_id, project_apartments.Number as pa_Number").where("q_id = " + apartment_booking.quotation_id.to_s).collect {|e| e.pa_Number}[0] %>
            </td>
            <td><%= Client.select(:Name, :LastName).where("id = " + apartment_booking.client_id.to_s).collect {|e| e.Name + ' ' + e.LastName} [0] %></td>
            <td><%= Bank.select(:Name).where("id = " + apartment_booking.bank_id.to_s).collect(&:Name)[0] %></td>
            <td><%= apartment_booking.BookingDate %></td>
            <td><%= apartment_booking.BookPrice %></td>
            <td class="text-center">
              <%= check_box_tag "IsActive", 0, apartment_booking.IsActive, disabled: true, class: "checkBoxSyleIndex" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
<br>